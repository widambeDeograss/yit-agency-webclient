import{O as z,u as F,a as U,b as B,r as n,j as e,B as d,C as R,I as E,L as K,H as Q,M as $}from"./index-ux5oNEAr.js";import{u as m,B as i,A as o,a as x,b as h}from"./avatar-CIvInjWZ.js";import{T as G,a as H,b as u,c as k}from"./tabs-BxN1H10p.js";import{S as M,p as j}from"./projects.service-XCosKkr7.js";import{S as O,F as J}from"./search-CRL-JZJS.js";import{U as v}from"./users-BG2cZW_u.js";import{S as _}from"./share-2-DJWy7QZA.js";import{E as V}from"./external-link-D7PkYr8u.js";import{C as W}from"./calendar-B2r9t42S.js";import"./index-D92uPXsy.js";import"./index-CoRKDfse.js";const oe=()=>{var g,f,w,y,C;const{id:r}=z(),t=F();U(),B();const[Y,Z]=n.useState(""),[N,A]=n.useState(""),[b,D]=n.useState(null),{data:s,isLoading:L,error:P,refetch:T}=m({queryKey:["project",r],queryFn:()=>j.getProjectDetail(Number(r)),enabled:!!r}),{data:l}=m({queryKey:["relatedProjects",r],queryFn:()=>j.getProjects(),enabled:!!r}),{data:c}=m({queryKey:["project-categories"],queryFn:()=>j.getCategories()}),I=a=>{a.preventDefault(),t(`/projects?search=${N}`)},q=a=>{D(a===b?null:a),t(`/projects?category=${a}`)},p=()=>{const a=window.location.href;navigator.clipboard.writeText(a),alert("Project URL copied to clipboard!")};return L?e.jsx(X,{}):P||!s?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-red-500",children:"Failed to load project details"}),e.jsx(d,{variant:"outline",className:"mt-4",onClick:()=>T(),children:"Retry"})]}):e.jsx("div",{className:"container mx-auto py-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"md:col-span-1",children:e.jsxs("div",{className:"bg-card rounded-xl p-4 shadow-sm border border-border/50 sticky top-20",children:[e.jsxs(d,{variant:"ghost",size:"sm",className:"mb-4",onClick:()=>t("/projects"),children:[e.jsx(R,{className:"h-4 w-4 mr-1"})," Back to Projects"]}),e.jsx("form",{onSubmit:I,className:"mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(O,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(E,{placeholder:"Search projects...",className:"pl-8",value:N,onChange:a=>A(a.target.value)}),e.jsx(d,{type:"submit",variant:"default",size:"sm",className:"absolute right-1 top-1",children:"Search"})]})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx(J,{className:"h-4 w-4 mr-2"}),e.jsx("h3",{className:"font-medium",children:"Categories"})]}),e.jsx("div",{className:"space-y-2",children:c!=null&&c.results?c.results.map(a=>e.jsxs(i,{variant:b===a.id?"default":"outline",className:"mr-2 mb-2 cursor-pointer hover:bg-primary/10 hover:text-primary w-full justify-between",onClick:()=>q(a.id),children:[a.name,e.jsx("span",{className:"ml-auto bg-background/80 text-xs px-1.5 py-0.5 rounded-sm",children:a.project_count||0})]},a.id)):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No categories found"})})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t border-border",children:[e.jsx("h3",{className:"font-medium mb-3",children:"Related Projects"}),e.jsxs("div",{className:"space-y-3",children:[(g=l==null?void 0:l.results)==null?void 0:g.filter(a=>a.id!==Number(r)).slice(0,5).map(a=>{var S;return e.jsxs(K,{to:`/projects/${a.id}`,className:"block bg-background rounded-lg p-3 hover:bg-accent transition-colors",children:[e.jsx("h4",{className:"font-medium text-sm line-clamp-2",children:a.title}),e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground mt-1",children:[e.jsx(v,{className:"h-3 w-3 mr-1"}),e.jsxs("span",{children:[((S=a.contributors)==null?void 0:S.length)||0," contributors"]})]})]},a.id)}),(!(l!=null&&l.results)||l.results.length<=1)&&e.jsx("p",{className:"text-sm text-muted-foreground",children:"No related projects found"})]})]})]})}),e.jsxs("div",{className:"md:col-span-3",children:[e.jsxs("div",{className:"bg-card rounded-xl shadow-sm border border-border/50 overflow-hidden",children:[s.featured_image&&e.jsxs("div",{className:"relative h-64 overflow-hidden",children:[e.jsx("img",{src:s.featured_image,alt:s.title,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-black/40 to-transparent"}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:s.title}),e.jsx("div",{className:"flex space-x-2",children:e.jsxs(d,{variant:"outline",size:"sm",className:"bg-white/20 border-white/40 text-white hover:bg-white/30",onClick:p,children:[e.jsx(_,{className:"h-4 w-4 mr-1"})," Share"]})})]})})]}),!s.featured_image&&e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold",children:s.title}),e.jsxs(d,{variant:"outline",size:"sm",onClick:p,children:[e.jsx(_,{className:"h-4 w-4 mr-1"})," Share"]})]})}),e.jsx("div",{className:"p-6 pt-0",children:e.jsxs(G,{defaultValue:"overview",className:"mt-6",children:[e.jsxs(H,{className:"grid grid-cols-3 mb-6",children:[e.jsx(u,{value:"overview",children:"Overview"}),e.jsx(u,{value:"contributors",children:"Contributors"}),e.jsx(u,{value:"discussions",children:"Discussions"})]}),e.jsx(k,{value:"overview",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(o,{className:"h-10 w-10",children:s.author.profileImage?e.jsx(x,{src:s.author.profileImage,alt:s.author.username}):e.jsx(h,{children:s.author.username.slice(0,2).toUpperCase()})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("div",{className:"font-medium",children:s.author.username}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Project Author • ",new Date(s.created_at).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.github_url&&e.jsx(d,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs("a",{href:s.github_url,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(Q,{className:"h-4 w-4 mr-2"})," GitHub Repository"]})}),s.project_url&&e.jsx(d,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs("a",{href:s.project_url,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(V,{className:"h-4 w-4 mr-2"})," Live Project"]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Description"}),e.jsx("p",{className:"text-muted-foreground whitespace-pre-line",children:s.description})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Technologies Used"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[(f=s==null?void 0:s.technologies_used)==null?void 0:f.map(a=>e.jsx(i,{variant:"secondary",children:a.name},a.id)),(!(s!=null&&s.technologies_used)||s.technologies_used.length===0)&&e.jsx("p",{className:"text-sm text-muted-foreground",children:"No technologies specified"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Categories"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:(w=s.categories)==null?void 0:w.map(a=>e.jsxs(i,{variant:"outline",className:"hover:bg-primary/10 hover:text-primary",children:["#",a.name]},a.id))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Project Timeline"}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(W,{className:"h-4 w-4 mr-1"}),e.jsxs("span",{children:["Created: ",new Date(s.created_at).toLocaleDateString()]}),e.jsx("span",{className:"mx-2",children:"•"}),e.jsxs("span",{children:["Last updated: ",new Date(s.updated_at).toLocaleDateString()]})]})]})]})}),e.jsx(k,{value:"contributors",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Project Contributors"}),e.jsxs("div",{className:"bg-background rounded-lg p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(o,{className:"h-10 w-10",children:s.author.profileImage?e.jsx(x,{src:s.author.profileImage,alt:s.author.username}):e.jsx(h,{children:s.author.username.slice(0,2).toUpperCase()})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("div",{className:"font-medium",children:s.author.username}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Project Author"})]})]}),e.jsx(i,{variant:"secondary",children:"Author"})]}),(y=s.contributors)==null?void 0:y.map(a=>e.jsxs("div",{className:"bg-background rounded-lg p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(o,{className:"h-10 w-10",children:a.profileImage?e.jsx(x,{src:a.profileImage,alt:a.username}):e.jsx(h,{children:a.username.slice(0,2).toUpperCase()})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("div",{className:"font-medium",children:a.username}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Contributor"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{variant:"outline",children:"Contributor"}),e.jsx(d,{variant:"ghost",size:"sm",children:e.jsx($,{className:"h-4 w-4"})})]})]},a.id)),(!s.contributors||s.contributors.length===0)&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(v,{className:"h-10 w-10 mx-auto text-muted-foreground"}),e.jsx("h4",{className:"mt-2 font-medium",children:"No contributors yet"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Be the first to contribute to this project!"}),e.jsx(d,{variant:"outline",className:"mt-4",children:"Join Project"})]})]})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-6",children:[e.jsxs("div",{className:"bg-card rounded-xl p-4 shadow-sm border border-border/50 flex items-center",children:[e.jsx(M,{className:"h-6 w-6 text-yellow-500 mr-3"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:"4.8"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Project Rating"})]})]}),e.jsxs("div",{className:"bg-card rounded-xl p-4 shadow-sm border border-border/50 flex items-center",children:[e.jsx(v,{className:"h-6 w-6 text-blue-500 mr-3"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:((C=s.contributors)==null?void 0:C.length)||0}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Contributors"})]})]})]})]})]})})},X=()=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"md:col-span-1",children:e.jsxs("div",{className:"bg-card rounded-xl p-4 shadow-sm border border-border/50 sticky top-20",children:[e.jsx("div",{className:"h-9 w-24 bg-muted rounded-md mb-4"}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-2 top-2.5 h-4 w-4 bg-muted rounded-full"}),e.jsx("div",{className:"h-9 w-full bg-muted rounded-md pl-8"}),e.jsx("div",{className:"absolute right-1 top-1 h-7 w-16 bg-muted rounded-md"})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"h-5 w-3/4 bg-muted rounded-md mb-3"}),e.jsx("div",{className:"space-y-2",children:[...Array(5)].map((r,t)=>e.jsx("div",{className:"h-8 w-full bg-muted rounded-md"},t))})]}),e.jsxs("div",{className:"pt-4 border-t border-border",children:[e.jsx("div",{className:"h-5 w-3/4 bg-muted rounded-md mb-3"}),e.jsx("div",{className:"space-y-3",children:[...Array(3)].map((r,t)=>e.jsx("div",{className:"h-16 w-full bg-muted rounded-lg"},t))})]})]})}),e.jsx("div",{className:"md:col-span-3",children:e.jsxs("div",{className:"bg-card rounded-xl shadow-sm border border-border/50 overflow-hidden",children:[e.jsx("div",{className:"relative h-64 overflow-hidden bg-muted"}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"h-10 w-3/4 bg-muted rounded-md mb-6"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-10 w-10 bg-muted rounded-full"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("div",{className:"h-4 w-24 bg-muted rounded-md mb-1"}),e.jsx("div",{className:"h-3 w-32 bg-muted rounded-md"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"h-9 w-32 bg-muted rounded-md"}),e.jsx("div",{className:"h-9 w-28 bg-muted rounded-md"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"h-5 w-24 bg-muted rounded-md mb-2"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 w-full bg-muted rounded-md"}),e.jsx("div",{className:"h-4 w-5/6 bg-muted rounded-md"}),e.jsx("div",{className:"h-4 w-4/6 bg-muted rounded-md"})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"h-5 w-36 bg-muted rounded-md mb-2"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[...Array(4)].map((r,t)=>e.jsx("div",{className:"h-6 w-16 bg-muted rounded-full"},t))})]})]})]})]})})]});export{oe as default};
